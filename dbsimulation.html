<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Database Simulation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #1a1a2e;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }
        .form-input {
        @apply w-full px-4 py-2 bg-gray-200 text-gray-900 rounded-lg shadow-inner border border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors;
        }
        .btn {
        @apply font-semibold text-white rounded-full shadow-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl;
        }
        .btn-gradient {
            background-image: linear-gradient(45deg, #4f46e5 0%, #3b82f6 100%);
        }
        .btn-danger {
        @apply text-sm font-semibold text-white bg-red-600 rounded-full shadow-md transition-all duration-200 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500;
        }
        .card {
            @apply bg-gray-800 p-8 rounded-2xl shadow-2xl backdrop-blur-md bg-opacity-70 border border-gray-700;
        }
        .table-container {
            @apply mt-6 overflow-x-auto;
        }
        table {
        @apply w-full text-sm text-left text-gray-300 table-auto;
        }
        thead {
            @apply text-xs uppercase text-gray-400 bg-gray-700 rounded-t-lg;
        }
        th, td {
            @apply px-4 py-3;
        }
        tbody tr {
            @apply border-b border-gray-700 transition-colors duration-200 hover:bg-gray-700;
        }
    </style>
</head>
<body class="text-gray-200">

    <div class="container mx-auto p-4 md:p-12 max-w-7xl">
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-2">Interactive Database Simulation</h1>
            <p class="mt-2 text-lg text-gray-400">A hands-on demonstration of database tables and relationships.</p>
            <div class="mb-6">
                <span class="text-sm font-medium text-gray-300 block mb-2">Choose ID Type:</span>
                <div class="flex items-center justify-center gap-6">

                    <label class="inline-flex items-center">
                        <input type="radio" class="form-radio text-blue-600" name="idType" value="int" checked>
                        <span class="ml-2 text-gray-400">Integer ID</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" class="form-radio text-blue-600" name="idType" value="uuid">
                        <span class="ml-2 text-gray-400">UUID</span>
                    </label>
                </div>
            </div>
        </header>

        <div id="message-box" class="hidden p-4 mb-6 text-sm text-center rounded-lg" role="alert"></div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
            
            <!-- Students Section -->
            <div class="card">
                <h2 class="text-3xl font-bold mb-4 text-blue-300 flex items-center gap-2">
                    <span class="text-xl">ðŸŽ“</span> Students Table
                </h2>
                <p class="text-sm text-gray-400 mb-6">
                    Each student has a unique <strong class="text-blue-400">Primary Key (Student ID)</strong>.
                </p>
                <form id="add-student-form">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="student-name" class="block text-sm font-medium text-gray-300 mb-1">Name</label>
                            <input type="text" id="student-name" class="form-input" required>
                        </div>
                        <div>
                            <label for="student-major" class="block text-sm font-medium text-gray-300 mb-1">Major</label>
                            <input type="text" id="student-major" class="form-input" required>
                        </div>
                    </div>
                    
                    <!-- ID Type Selection -->
                    

                    <button type="submit" class="btn btn-gradient w-full py-2">Add Student</button>
                </form>

                <div class="table-container">
                    <table class="rounded-lg overflow-hidden w-full">
                        <thead>
                            <tr>
                                <th class="w-10%">ðŸ”‘ ID</th>
                                <th class="w-40%">Name</th>
                                <th class="w-40%">Major</th>
                                <th class="w-10%">Action</th>
                            </tr>
                        </thead>
                        <tbody id="students-table-body">
                            <!-- Student data will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Courses Section -->
            <div class="card">
                <h2 class="text-3xl font-bold mb-4 text-emerald-300 flex items-center gap-2">
                    <span class="text-xl">ðŸ“š</span> Courses Table
                </h2>
                <p class="text-sm text-gray-400 mb-6">
                    A <strong class="text-emerald-400">Foreign Key</strong> links each course to a student.
                </p>
                <form id="add-course-form">
                     <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="course-name" class="block text-sm font-medium text-gray-300 mb-1">Course Name</label>
                            <input type="text" id="course-name" class="form-input" required>
                        </div>
                        <div>
                            <label for="student-select" class="block text-sm font-medium text-gray-300 mb-1">Enrolled Student</label>
                            <select id="student-select" class="form-input" required>
                                <option value="" disabled selected>Select a student</option>
                                <!-- Student options will be populated here -->
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-gradient w-full py-2">Add Course</button>
                </form>

                <div class="table-container w-full">
                    <table class="rounded-lg overflow-hidden w-full">
                        <thead>
                            <tr>
                                <th class="w-10%">ðŸ”‘ ID</th>
                                <th class="w-20%">Course Name</th>
                                <th class="w-30%">Student</th>
                                <th class="w-30%">ðŸ”— Student ID (FK)</th>
                                <th class="w-10%">Action</th>
                            </tr>
                        </thead>
                        <tbody id="courses-table-body">
                           <!-- Course data will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const messageBox = document.getElementById('message-box');
            
            const addStudentForm = document.getElementById('add-student-form');
            const studentNameInput = document.getElementById('student-name');
            const studentMajorInput = document.getElementById('student-major');
            const studentsTableBody = document.getElementById('students-table-body');
            const idTypeRadios = document.getElementsByName('idType');
            
            const addCourseForm = document.getElementById('add-course-form');
            const courseNameInput = document.getElementById('course-name');
            const studentSelect = document.getElementById('student-select');
            const coursesTableBody = document.getElementById('courses-table-body');

            let students = [];
            let courses = [];
            let nextIntId = 1;

            function showMessage(message, isError = false) {
                messageBox.textContent = message;
                messageBox.classList.remove('hidden', 'bg-green-100', 'text-green-800', 'bg-red-100', 'text-red-800');
                if (isError) {
                    messageBox.classList.add('bg-red-100', 'text-red-800');
                } else {
                    messageBox.classList.add('bg-green-100', 'text-green-800');
                }
                setTimeout(() => {
                    messageBox.classList.add('hidden');
                }, 3000);
            }

            function addStudent(e) {
                e.preventDefault();
                const studentName = studentNameInput.value.trim();
                const studentMajor = studentMajorInput.value.trim();
                const idType = [...idTypeRadios].find(radio => radio.checked).value;

                if (!studentName || !studentMajor) {
                    showMessage("Please fill in all student fields.", true);
                    return;
                }

                const newStudent = {
                    id: idType === 'uuid' ? crypto.randomUUID() : (nextIntId++).toString(),
                    name: studentName,
                    major: studentMajor
                };

                students.push(newStudent);
                showMessage("Student added successfully!");
                addStudentForm.reset();
                renderTables();
            }

            function addCourse(e) {
                e.preventDefault();
                const courseName = courseNameInput.value.trim();
                const selectedOption = studentSelect.options[studentSelect.selectedIndex];
                const studentId = selectedOption.value;

                if (!courseName || !studentId) {
                    showMessage("Please fill in all course fields.", true);
                    return;
                }
                
                const student = students.find(s => s.id === studentId);

                const newCourse = {
                    id: crypto.randomUUID(),
                    name: courseName,
                    studentId: studentId,
                    studentName: student.name
                };

                courses.push(newCourse);
                showMessage("Course added successfully!");
                addCourseForm.reset();
                renderTables();
            }

            function deleteStudent(studentId) {
                students = students.filter(s => s.id !== studentId);
                courses = courses.filter(c => c.studentId !== studentId);
                showMessage("Student and related courses deleted successfully!");
                renderTables();
            }

            function deleteCourse(courseId) {
                courses = courses.filter(c => c.id !== courseId);
                showMessage("Course deleted successfully!");
                renderTables();
            }

            function renderTables() {
                // Clear existing table content
                studentsTableBody.innerHTML = '';
                coursesTableBody.innerHTML = '';
                studentSelect.innerHTML = '<option value="" disabled selected>Select a student</option>';

                // Render students
                students.forEach(student => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td class="font-mono text-xs">${student.id}</td>
                        <td class="font-medium">${student.name}</td>
                        <td>${student.major}</td>
                        <td><button class="btn-danger delete-student" data-id="${student.id}">Delete</button></td>
                    `;
                    studentsTableBody.appendChild(tr);

                    const option = document.createElement('option');
                    option.value = student.id;
                    option.textContent = `${student.name} (${student.major})`;
                    studentSelect.appendChild(option);
                });

                // Render courses
                courses.forEach(course => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td class="font-mono text-xs">${course.id}</td>
                        <td class="font-medium">${course.name}</td>
                        <td>${course.studentName || 'N/A'}</td>
                        <td class="font-mono text-xs">${course.studentId}</td>
                        <td><button class="btn-danger delete-course" data-id="${course.id}">Delete</button></td>
                    `;
                    coursesTableBody.appendChild(tr);
                });
            }

            // Initial render
            renderTables();

            // Event Listeners
            addStudentForm.addEventListener('submit', addStudent);
            addCourseForm.addEventListener('submit', addCourse);

            document.addEventListener('click', (e) => {
                if (e.target && e.target.classList.contains('delete-student')) {
                    const studentId = e.target.getAttribute('data-id');
                    deleteStudent(studentId);
                }
                if (e.target && e.target.classList.contains('delete-course')) {
                    const courseId = e.target.getAttribute('data-id');
                    deleteCourse(courseId);
                }
            });
        });
    </script>
</body>
</html>
